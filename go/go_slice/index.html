<!DOCTYPE html>
<html lang="en" data-theme=""><head>
    <title> 李明燮(li_mingxie) | 【go笔记】 数组, 切片(slice), 映射(map)简介 </title>

    
    <meta charset="utf-8"><meta name="generator" content="Hugo 0.77.0" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
    <meta name="description" content="年纪大了做开发是没出息吗？">
    
    <link rel="stylesheet"
          href="https://limingxie.github.io/css/style.min.babea5e0ba217521662ddc7d603c65ce69ed6c1fb49ca589d0f610c217d1ea86.css"
          integrity="sha256-ur6l4LohdSFmLdx9YDxlzmntbB&#43;0nKWJ0PYQwhfR6oY="
          crossorigin="anonymous"
          type="text/css"><link rel="stylesheet" 
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" 
    integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" 
    crossorigin="anonymous" />

    
    <link rel="shortcut icon" href="https://limingxie.github.io/favicons/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="https://limingxie.github.io/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://limingxie.github.io/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://limingxie.github.io/favicons/favicon-16x16.png">

    <link rel="canonical" href="https://limingxie.github.io/go/go_slice/">

    
    
    
    
    <script type="text/javascript"
            src="https://limingxie.github.io/js/anatole-header.min.e782db136ec18d105a4552702eac49f4620d6867da3fbf808bd53e806c96be6e.js"
            integrity="sha256-54LbE27BjRBaRVJwLqxJ9GINaGfaP7&#43;Ai9U&#43;gGyWvm4="
            crossorigin="anonymous"></script>
    <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://limingxie.github.io/105"/>

<meta name="twitter:title" content="【go笔记】 数组, 切片(slice), 映射(map)简介"/>
<meta name="twitter:description" content="我们在日常变成中经常用到数组, 切片(slice), 映射(map)。
这篇文章中简单的介绍一下这3中结构。
1. 数组 数组是我们接触到的最基本的结构，在Go里面的数组有一些比较特别的地方。如下：
 数组是值。将一个数组赋予另一个数组会复制其所有元素。 若将某个数组传入某个函数，它将接收到该数组复制一份而非指针。 数组的大小是其类型的一部分。类型 [10]int 和 [20]int 是不同的。  数组为值的属性很有用，但代价也高，我们也可以传递一个指向该数组的指针。"/>

</head>
<body><div class="sidebar animated fadeInDown">
    <div class="logo-title">
        <div class="title">
            <img src="https://limingxie.github.io/images/limingxie2.jpeg" alt="profile picture">
            <h3 title=""><a href="/">宅男 &#43; 屌丝 &#43; 程序员</a></h3>
            <div class="description">
                <p>年纪大了做开发是没出息吗？</p>
            </div>
        </div>
    </div>
    <ul class="social-links">
        
            <li>
                <a href="mailto:li_mingxie@163.com" rel="me" aria-label="e-mail">
                    <i class="fas fa-envelope fa-2x" aria-hidden="true"></i>
                </a>
            </li>
        
    </ul>
    <div class="footer">
        <div class="by_farbox">&copy; 李明燮(li_mingxie) 2022 </div>
    </div>
</div>
<div class="main">
    <div class="page-top animated fadeInDown">
    <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
    </a>
    <ul class="nav" id="navMenu">
        
        
            
            <li><a 
                   href="/"
                        
                   title="">Home</a></li>
        
            
            <li><a 
                   href="/limingxie/"
                        
                   title="">随笔</a></li>
        
            
            <li><a 
                   href="/java/"
                        
                   title="">Java</a></li>
        
            
            <li><a 
                   href="/go/"
                        
                   title="">Golang</a></li>
        
            
            <li><a 
                   href="/network/"
                        
                   title="">网络</a></li>
        
            
            <li><a 
                   href="/database/"
                        
                   title="">database</a></li>
        
            
            <li><a 
                   href="/k8s/"
                        
                   title="">环境</a></li>
        
            
            <li><a 
                   href="/git/"
                        
                   title="">Git</a></li>
        
            
            <li><a 
                   href="/basic/"
                        
                   title="">基础</a></li>
        
            
            <li><a 
                   href="/algorithm/"
                        
                   title="">算法</a></li>
        
            
            <li><a 
                   href="/work_sharing/"
                        
                   title="">工作经历</a></li>
        
        
        <li class="theme-switch-item">
            <a class="theme-switch" title="Switch Theme">
                <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>

    <div class="autopagerize_page_element">
        <div class="content">
    <div class="post animated fadeInDown">
        <div class="post-content">

            <div class="post-title">
                <h3>【go笔记】 数组, 切片(slice), 映射(map)简介</h3>
                
            </div>

            <p>我们在日常变成中经常用到数组, 切片(slice), 映射(map)。<br>
这篇文章中简单的介绍一下这3中结构。</p>
<h3 id="1-数组">1. 数组</h3>
<p>数组是我们接触到的最基本的结构，在Go里面的数组有一些比较特别的地方。如下：</p>
<ol>
<li>数组是值。将一个数组赋予另一个数组会复制其所有元素。</li>
<li>若将某个数组传入某个函数，它将接收到该数组复制一份而非指针。</li>
<li>数组的大小是其类型的一部分。类型 [10]int 和 [20]int 是不同的。</li>
</ol>
<p>数组为值的属性很有用，但代价也高，我们也可以传递一个指向该数组的指针。</p>
<h3 id="2-切片slice">2. 切片(slice)</h3>
<p>本篇文章的重点来了。一般情况下，很少直接用数组。<br>
比如像java 我们经常会用到ArrayList, Go是经常会用到切片(slice)。<br>
切片(slice)通过对数组进行封装，为数据序列提供了更通用、强大而方便的接口。</p>
<p>切片的长度可以通过len()获得，容量可通过内建函数cap()获得。<br>
如果超出长度需要用append函数追加到下一个位置中。<br>
当超出预留量时，自己会做1倍的扩容。</p>
<p>切片还有几个明显的特点，我们先看看下面的例子:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;==============var声明和make的内存分配==============&#34;</span>)
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a0</span> []<span style="color:#66d9ef">int</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n&#34;</span>, <span style="color:#a6e22e">a0</span>, len(<span style="color:#a6e22e">a0</span>), cap(<span style="color:#a6e22e">a0</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">a0</span>, <span style="color:#a6e22e">a0</span>, <span style="color:#a6e22e">a0</span>)
	<span style="color:#a6e22e">b0</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">0</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n&#34;</span>, <span style="color:#a6e22e">b0</span>, len(<span style="color:#a6e22e">b0</span>), cap(<span style="color:#a6e22e">b0</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">b0</span>, <span style="color:#a6e22e">b0</span>, <span style="color:#a6e22e">b0</span>)

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;==============自动扩容测试==============&#34;</span>)
	<span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>) <span style="color:#75715e">//声明一个长度为2，容量为3的slice
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n&#34;</span>, <span style="color:#a6e22e">a</span>, len(<span style="color:#a6e22e">a</span>), cap(<span style="color:#a6e22e">a</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">a</span>)
	<span style="color:#a6e22e">a</span>[<span style="color:#ae81ff">1</span>] = <span style="color:#ae81ff">1</span>         <span style="color:#75715e">//因是长度内的可以直接赋值
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">a</span> = append(<span style="color:#a6e22e">a</span>, <span style="color:#ae81ff">2</span>) <span style="color:#75715e">//超出长度只能用append赋值
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n&#34;</span>, <span style="color:#a6e22e">a</span>, len(<span style="color:#a6e22e">a</span>), cap(<span style="color:#a6e22e">a</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">a</span>)
	<span style="color:#a6e22e">a</span> = append(<span style="color:#a6e22e">a</span>, <span style="color:#ae81ff">3</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n&#34;</span>, <span style="color:#a6e22e">a</span>, len(<span style="color:#a6e22e">a</span>), cap(<span style="color:#a6e22e">a</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">a</span>)
	<span style="color:#a6e22e">a</span> = append(<span style="color:#a6e22e">a</span>, <span style="color:#ae81ff">4</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n&#34;</span>, <span style="color:#a6e22e">a</span>, len(<span style="color:#a6e22e">a</span>), cap(<span style="color:#a6e22e">a</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">a</span>)

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;==============存储地址的变化==============&#34;</span>)
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">b</span> []<span style="color:#66d9ef">int</span>
	<span style="color:#a6e22e">b</span> = <span style="color:#a6e22e">a</span>	<span style="color:#75715e">//测试给别的变量赋值会有什么变化
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n&#34;</span>, <span style="color:#a6e22e">b</span>, len(<span style="color:#a6e22e">b</span>), cap(<span style="color:#a6e22e">b</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">b</span>, <span style="color:#a6e22e">b</span>, <span style="color:#a6e22e">b</span>)
	<span style="color:#a6e22e">c</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">a</span>[:<span style="color:#ae81ff">2</span>] <span style="color:#75715e">//测试截取的变化
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n&#34;</span>, <span style="color:#a6e22e">c</span>, len(<span style="color:#a6e22e">c</span>), cap(<span style="color:#a6e22e">c</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">c</span>, <span style="color:#a6e22e">c</span>, <span style="color:#a6e22e">c</span>)
	<span style="color:#a6e22e">d</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">a</span>[<span style="color:#ae81ff">2</span>:] <span style="color:#75715e">//测试截取的变化
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n&#34;</span>, <span style="color:#a6e22e">d</span>, len(<span style="color:#a6e22e">d</span>), cap(<span style="color:#a6e22e">d</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">d</span>, <span style="color:#a6e22e">d</span>, <span style="color:#a6e22e">d</span>)
}
</code></pre></div><p>执行结果如下</p>
<pre><code>$ go run main.go
==============var声明和make的内存分配==============
type: []int | len: 0 | cap: 0 | head-address: 0xc00000c048 | value-address: 0x0 | value:[] 		//var 没有分配值内存空间
type: []int | len: 0 | cap: 0 | head-address: 0xc00000c060 | value-address: 0x1190370 | value:[] 	//make是分配了值内存空间
==============自动扩容测试==============
type: []int | len: 2 | cap: 3 | head-address: 0xc00000c0c0 | value-address: 0xc000018108 | value:[0 0] 		//赋了默认值
type: []int | len: 3 | cap: 3 | head-address: 0xc00000c0c0 | value-address: 0xc000018108 | value:[0 1 2] 	//值内存地址没有变
type: []int | len: 4 | cap: 6 | head-address: 0xc00000c0c0 | value-address: 0xc000016180 | value:[0 1 2 3] 	//因超出容量，所以值内存地址有了变化，容量也扩到原来的2倍
type: []int | len: 5 | cap: 6 | head-address: 0xc00000c0c0 | value-address: 0xc000016180 | value:[0 1 2 3 4] 	//值内存地址和容量没什么变化
==============存储地址的变化==============
type: []int | len: 5 | cap: 6 | head-address: 0xc00000c1f8 | value-address: 0xc000016180 | value:[0 1 2 3 4] 	//b=a 因是不同变量，所以头部内存地址有变化，值内存地址没变
type: []int | len: 2 | cap: 6 | head-address: 0xc00000c258 | value-address: 0xc000016180 | value:[0 1]  	//a[:2]截取前面的值，值内存地址没变化，容量也没变化
type: []int | len: 3 | cap: 4 | head-address: 0xc00000c2b8 | value-address: 0xc000016190 | value:[2 3 4] 	//a[2:]截取后面的值，值内存地址有变化，容量被截掉了
</code></pre><p>那切片(slice)在函数里传参时会有什么变化呢？<br>
我们做一下简单的试验:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;fmt&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#a6e22e">slice1</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">4</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;==============【测试1】进函数之前slice1的信息==============&#34;</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n\n&#34;</span>, <span style="color:#a6e22e">slice1</span>, len(<span style="color:#a6e22e">slice1</span>), cap(<span style="color:#a6e22e">slice1</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">slice1</span>, <span style="color:#a6e22e">slice1</span>, <span style="color:#a6e22e">slice1</span>)
	<span style="color:#a6e22e">test1</span>(<span style="color:#a6e22e">slice1</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;==============【测试1】出函数后slice1的信息==============&#34;</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n&#34;</span>, <span style="color:#a6e22e">slice1</span>, len(<span style="color:#a6e22e">slice1</span>), cap(<span style="color:#a6e22e">slice1</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">slice1</span>, <span style="color:#a6e22e">slice1</span>, <span style="color:#a6e22e">slice1</span>)

	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;&#34;</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;&#34;</span>)

	<span style="color:#a6e22e">slice2</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">4</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;==============【测试2】进函数之前slice2的信息==============&#34;</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n\n&#34;</span>, <span style="color:#a6e22e">slice2</span>, len(<span style="color:#a6e22e">slice2</span>), cap(<span style="color:#a6e22e">slice2</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">slice2</span>, <span style="color:#a6e22e">slice2</span>, <span style="color:#a6e22e">slice2</span>)
	<span style="color:#a6e22e">test2</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">slice2</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;==============【测试1】出函数后slice2的信息==============&#34;</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n&#34;</span>, <span style="color:#a6e22e">slice2</span>, len(<span style="color:#a6e22e">slice2</span>), cap(<span style="color:#a6e22e">slice2</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">slice2</span>, <span style="color:#a6e22e">slice2</span>, <span style="color:#a6e22e">slice2</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">test1</span>(<span style="color:#a6e22e">slice</span> []<span style="color:#66d9ef">int</span>) {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n\n&#34;</span>, <span style="color:#a6e22e">slice</span>, len(<span style="color:#a6e22e">slice</span>), cap(<span style="color:#a6e22e">slice</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">slice</span>, <span style="color:#a6e22e">slice</span>, <span style="color:#a6e22e">slice</span>)

	<span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">slice</span>
	<span style="color:#a6e22e">a</span>[<span style="color:#ae81ff">1</span>] = <span style="color:#ae81ff">1</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n&#34;</span>, <span style="color:#a6e22e">slice</span>, len(<span style="color:#a6e22e">slice</span>), cap(<span style="color:#a6e22e">slice</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">slice</span>, <span style="color:#a6e22e">slice</span>, <span style="color:#a6e22e">slice</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n\n&#34;</span>, <span style="color:#a6e22e">a</span>, len(<span style="color:#a6e22e">a</span>), cap(<span style="color:#a6e22e">a</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">a</span>)

	<span style="color:#a6e22e">a</span> = append(<span style="color:#a6e22e">a</span>, <span style="color:#ae81ff">2</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n&#34;</span>, <span style="color:#a6e22e">slice</span>, len(<span style="color:#a6e22e">slice</span>), cap(<span style="color:#a6e22e">slice</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">slice</span>, <span style="color:#a6e22e">slice</span>, <span style="color:#a6e22e">slice</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n\n&#34;</span>, <span style="color:#a6e22e">a</span>, len(<span style="color:#a6e22e">a</span>), cap(<span style="color:#a6e22e">a</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">a</span>)

	<span style="color:#a6e22e">slice</span> = append(<span style="color:#a6e22e">slice</span>, <span style="color:#ae81ff">6</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n&#34;</span>, <span style="color:#a6e22e">slice</span>, len(<span style="color:#a6e22e">slice</span>), cap(<span style="color:#a6e22e">slice</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">slice</span>, <span style="color:#a6e22e">slice</span>, <span style="color:#a6e22e">slice</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n\n&#34;</span>, <span style="color:#a6e22e">a</span>, len(<span style="color:#a6e22e">a</span>), cap(<span style="color:#a6e22e">a</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">a</span>)

	<span style="color:#a6e22e">a</span> = append(<span style="color:#a6e22e">a</span>, <span style="color:#ae81ff">8</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n&#34;</span>, <span style="color:#a6e22e">slice</span>, len(<span style="color:#a6e22e">slice</span>), cap(<span style="color:#a6e22e">slice</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">slice</span>, <span style="color:#a6e22e">slice</span>, <span style="color:#a6e22e">slice</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n\n&#34;</span>, <span style="color:#a6e22e">a</span>, len(<span style="color:#a6e22e">a</span>), cap(<span style="color:#a6e22e">a</span>), <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">a</span>)

}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">test2</span>(<span style="color:#a6e22e">slice</span> <span style="color:#f92672">*</span>[]<span style="color:#66d9ef">int</span>) {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n\n&#34;</span>, <span style="color:#a6e22e">slice</span>, len(<span style="color:#f92672">*</span><span style="color:#a6e22e">slice</span>), cap(<span style="color:#f92672">*</span><span style="color:#a6e22e">slice</span>), <span style="color:#a6e22e">slice</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">slice</span>, <span style="color:#a6e22e">slice</span>)

	<span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">slice</span>
	(<span style="color:#f92672">*</span><span style="color:#a6e22e">a</span>)[<span style="color:#ae81ff">1</span>] = <span style="color:#ae81ff">2</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n&#34;</span>, <span style="color:#a6e22e">slice</span>, len(<span style="color:#f92672">*</span><span style="color:#a6e22e">slice</span>), cap(<span style="color:#f92672">*</span><span style="color:#a6e22e">slice</span>), <span style="color:#a6e22e">slice</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">slice</span>, <span style="color:#a6e22e">slice</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n\n&#34;</span>, <span style="color:#a6e22e">a</span>, len(<span style="color:#f92672">*</span><span style="color:#a6e22e">a</span>), cap(<span style="color:#f92672">*</span><span style="color:#a6e22e">a</span>), <span style="color:#a6e22e">a</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">a</span>)

	<span style="color:#f92672">*</span><span style="color:#a6e22e">a</span> = append(<span style="color:#f92672">*</span><span style="color:#a6e22e">a</span>, <span style="color:#ae81ff">2</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n&#34;</span>, <span style="color:#a6e22e">slice</span>, len(<span style="color:#f92672">*</span><span style="color:#a6e22e">slice</span>), cap(<span style="color:#f92672">*</span><span style="color:#a6e22e">slice</span>), <span style="color:#a6e22e">slice</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">slice</span>, <span style="color:#a6e22e">slice</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type: %T | len: %d | cap: %d | head-address: %p | value-address: %p | value:%+v \n\n&#34;</span>, <span style="color:#a6e22e">a</span>, len(<span style="color:#f92672">*</span><span style="color:#a6e22e">a</span>), cap(<span style="color:#f92672">*</span><span style="color:#a6e22e">a</span>), <span style="color:#a6e22e">a</span>, <span style="color:#f92672">*</span><span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">a</span>)
}
</code></pre></div><p>执行结果如下</p>
<pre><code>$ go run main.go
==============【测试1】进函数之前slice1的信息==============
type: []int | len: 2 | cap: 4 | head-address: 0xc0000a6030 | value-address: 0xc0000b6000 | value:[0 0] 

type: []int | len: 2 | cap: 4 | head-address: 0xc0000a6090 | value-address: 0xc0000b6000 | value:[0 0] 		//进入函数，会取新的头部地址，值的内存地址不变

type: []int | len: 2 | cap: 4 | head-address: 0xc0000a6090 | value-address: 0xc0000b6000 | value:[0 1] 		//新声明变量a的头部地址不一样，值内存地址一样。而且a[1]=1的操作，因值内存地址一样，所以都受到了影响
type: []int | len: 2 | cap: 4 | head-address: 0xc0000a60f0 | value-address: 0xc0000b6000 | value:[0 1] 

type: []int | len: 2 | cap: 4 | head-address: 0xc0000a6090 | value-address: 0xc0000b6000 | value:[0 1] 		//a = append(a, 2) 以后参数slice 没变化，只有a的值有变化。
type: []int | len: 3 | cap: 4 | head-address: 0xc0000a60f0 | value-address: 0xc0000b6000 | value:[0 1 2] 

type: []int | len: 3 | cap: 4 | head-address: 0xc0000a6090 | value-address: 0xc0000b6000 | value:[0 1 6] 	//slice = append(slice, 6) 这里发生了有意思的现象了，6把2取代了。这个地方需要非常注意。
type: []int | len: 3 | cap: 4 | head-address: 0xc0000a60f0 | value-address: 0xc0000b6000 | value:[0 1 6] 

type: []int | len: 3 | cap: 4 | head-address: 0xc0000a6090 | value-address: 0xc0000b6000 | value:[0 1 6] 	//a = append(a, 8) 因两个变量都append到第三个索引，所以下一次的append是不会被覆盖了。
type: []int | len: 4 | cap: 4 | head-address: 0xc0000a60f0 | value-address: 0xc0000b6000 | value:[0 1 6 8] 

==============【测试1】出函数后slice1的信息==============
type: []int | len: 2 | cap: 4 | head-address: 0xc0000a6030 | value-address: 0xc0000b6000 | value:[0 1] 		//出函数只影响到值内存的变化，函数里的append操作没有受到影响


==============【测试2】进函数之前slice2的信息==============
type: []int | len: 2 | cap: 4 | head-address: 0xc0000a6270 | value-address: 0xc0000b6018 | value:[0 0] 

type: *[]int | len: 2 | cap: 4 | head-address: 0xc0000a6270 | value-address: 0xc0000b6018 | value:&amp;[0 0] 	//参数为*slice 进入函数，什么都没变

type: *[]int | len: 2 | cap: 4 | head-address: 0xc0000a6270 | value-address: 0xc0000b6018 | value:&amp;[0 2] 	//两个变量都受到影响
type: *[]int | len: 2 | cap: 4 | head-address: 0xc0000a6270 | value-address: 0xc0000b6018 | value:&amp;[0 2] 

type: *[]int | len: 3 | cap: 4 | head-address: 0xc0000a6270 | value-address: 0xc0000b6018 | value:&amp;[0 2 2] 	//两个变量都受到影响
type: *[]int | len: 3 | cap: 4 | head-address: 0xc0000a6270 | value-address: 0xc0000b6018 | value:&amp;[0 2 2] 

==============【测试1】出函数后slice2的信息==============
type: []int | len: 3 | cap: 4 | head-address: 0xc0000a6270 | value-address: 0xc0000b6018 | value:[0 2 2]	//估计也预想到了，都会受到影响
</code></pre><p>如上测试我们可以总结出几个需要注意的点：</p>
<ol>
<li>用make声明的时候，会分配值内存地址和默认值。</li>
<li>超出容量是会自动扩容(原来的2倍)。这时值内存地址会有变化。</li>
<li>当做函数的参数传进去的时候，用的值内存地址是一样，但是会使用新建的头部内存地址。</li>
<li>不同的变量使用同一个值内存地址时需要注意相互受到的影响。</li>
</ol>
<h3 id="3-映射map">3. 映射(map)</h3>
<p>如果了解了上述切片(slice)的内容，映射(map)也没什么复杂的。<br>
它可以关联不同类型的值。其键可以是任何相等性操作符支持的类型，<br>
如整数、浮点数、复数、字符串、指针、接口（只要其动态类型支持相等性判断）、结构以及数组。 切片不能用作映射键。</p>
<p>我比较喜欢用if _, ok := map[parm]的方式取值。具体如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ages</span> = <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>{
	<span style="color:#e6db74">&#34;Ann&#34;</span>: <span style="color:#ae81ff">19</span>,
	<span style="color:#e6db74">&#34;Joe&#34;</span>: <span style="color:#ae81ff">20</span>,
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">printAge</span>(<span style="color:#e6db74">&#34;Joe&#34;</span>)
	<span style="color:#a6e22e">printAge</span>(<span style="color:#e6db74">&#34;Jack&#34;</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">printAge</span>(<span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>) {

	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">age</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ages</span>[<span style="color:#a6e22e">name</span>]; <span style="color:#a6e22e">ok</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%s is %d years old. \n&#34;</span>, <span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">age</span>)
	} <span style="color:#66d9ef">else</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%s is unknown.\n&#34;</span>, <span style="color:#a6e22e">name</span>)
	}
}
</code></pre></div><p>执行结果如下</p>
<pre><code>$ go run main.go
Joe is 20 years old. 
Jack is unknown.
</code></pre><h3 id="总结">总结</h3>
<p>需要用key-value结构的话就用映射(map)。<br>
一般不会用到数组结构，大部分情况下都会用比较方便的切片(slice)。<br>
使用切片(slice)的时候，需了解容量及自动扩容的机制(会增加1倍的容量，头部地址不变，值的内存地址会有变化)。<br>
切片(slice)当做参数，或是相互赋值的时候会出现共用值内存地址的情况，这时需要注意一下有没有数据被串改的可能性。</p>
<hr>
<p>欢迎大家的意见和交流</p>
<p><code>email: li_mingxie@163.com</code></p>

        </div>
        <div class="post-footer">
            <div class="info">
                <span class="separator"><a class="category" href="/categories/go/">Go</a><a class="category" href="/categories/golang/">golang</a></span>

                <span class="separator"><a class="tag" href="/tags/go/">go</a><a class="tag" href="/tags/golang/">golang</a><a class="tag" href="/tags/new/">new</a><a class="tag" href="/tags/make/">make</a></span>

            </div>
        </div>

        
    </div>


        </div>
    </div>
</div>

<script type="text/javascript"
        src="https://limingxie.github.io/js/jquery.min.86b1e8f819ee2d9099a783e50b49dff24282545fc40773861f9126b921532e4c.js"
        integrity="sha256-hrHo&#43;BnuLZCZp4PlC0nf8kKCVF/EB3OGH5EmuSFTLkw="
        crossorigin="anonymous"></script>




<script type="text/javascript"
        src="https://limingxie.github.io/js/bundle.min.0f9c74cb78f13d1f15f33daff4037c70354f98acfbb97a6f61708966675c3cae.js"
        integrity="sha256-D5x0y3jxPR8V8z2v9AN8cDVPmKz7uXpvYXCJZmdcPK4="
        crossorigin="anonymous"></script>

<script type="text/javascript"
        src="https://limingxie.github.io/js/medium-zoom.min.92f21c856129f84aeb719459b3e6ac621a3032fd7b180a18c04e1d12083f8aba.js"
        integrity="sha256-kvIchWEp&#43;ErrcZRZs&#43;asYhowMv17GAoYwE4dEgg/iro="
        crossorigin="anonymous"></script>
</body>

</html>
